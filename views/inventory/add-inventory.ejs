<% if (title) { %>
<h1><%= title %></h1>
<% } else {
  res.redirect('/')
} %>

<%- messages() %>

<% if (errors) { %>
  <ul class="notice-add-inventory">
 <% errors.array().forEach(error => { %>
   <li><%= error.msg %></li>
<%  }) %>
 </ul>
<% } %>


<div class="registration-page">
    <p class="registration-page-title">ALL FIELDS ARE REQUIRED</p>
    <form action="/inv/add-inventory" method="post">
        <fieldset>
            <div class="form-addInventory-group">
                <label for="classification">Classification</label>
                <%- classificationList %>
            </div>
            <div class="form-addInventory-group">
                <label for="make">Make *</label>
                <input type="text" id="make" name="inv_make" placeholder="Min of 3 characters" minlength="3" required value="<%= locals.inv_make %>">
            </div>
            <div class="form-addInventory-group">
                <label for="model">Model *</label>
                <input type="text" id="model" name="inv_model" placeholder="Min of 3 characters" minlength="3" required value="<%= locals.inv_model %>">
            </div>
            <div class="form-addInventory-group">
                <label for="description">Description</label>
                <textarea class="detail" id="description" name="inv_description" required value="<%= locals.inv_description %>"></textarea>
            </div>
            <div class="form-addInventory-group">
                <label for="image_path">Image Path</label>
                <input type="text" id="image_path" name="inv_image" value="/images/vehicles/dodge_muscle.jpg" required >
            </div>
            <div class="form-addInventory-group">
                <label for="thumbnail_path">Thumbnail Path</label>
                <input type="text" id="thumbnail_path" name="inv_thumbnail" value="/images/vehicles/dodge_muscle.jpg" required>
            </div>
            <div class="form-addInventory-group">
                <label for="price">Price</label>
                <input class="detail" type="number" id="price" name="inv_price" placeholder="decimal or integer" required value="<%= locals.inv_price %>">
            </div>
            <div class="form-addInventory-group">
                <label for="year">Year</label>
                <input class="detail type="number" id="year" name="inv_year" placeholder="4-digit year" pattern="\d{4}" required value="<%= locals.inv_year %>">
            </div>
            <div class="form-addInventory-group">
                <label for="miles">Miles</label>
                <input class="detail type="number" id="miles" name="inv_miles" placeholder="digits only" pattern="\d*" required value="<%= locals.inv_miles %>">
            </div>
            <div class="form-addInventory-group">
                <label for="color">Color</label>
                <input type="text" id="color" name="inv_color" required value="<%= locals.inv_color %>">
            </div>
            <button type="submit" class="register-button">Add Vehicle</button>
        </fieldset>
    </form>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function(){
        document.querySelectorAll("ul.notice-add-inventory li").forEach(li =>{
            if(li.textContent.trim() === "Invalid value"){
                li.style.display = "none";
            }
         })
    })
</script>